<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.js
" charset="utf-8"></script>
</head>
<body>
  <script type="text/javascript">
    var wait = function() {
      var tasks = function() {
        alert( '执行完毕！' )
      }
      setTimeout( tasks, 2000 )
    };
    wait()

    var dtd = $.Deferred(); // 新建一个Deferred对象
  　　var wait = function( dtd ){
  　　　　var tasks = function(){
  　　　　　　alert( "执行完毕！" );
  　　　　　　dtd.resolve(); // 改变Deferred对象的执行状态
  　　　　};

  　　　　setTimeout( tasks, 5000 );
  　　　　return dtd.promise(); // 返回promise对象
  　　};
  　　var d = wait( dtd ); // 新建一个d对象，改为对这个对象进行操作
  　　$.when (d )
  　　.done( function() { alert( "哈哈，成功了！" ); })
  　　.fail( function() { alert( "出错啦！") ; });
  　　d.resolve(); // 此时，这个语句是无效的

  </script>
<button id='div'>1232</button>
</body>
</html>
